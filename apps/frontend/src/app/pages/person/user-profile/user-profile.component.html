@if(step === 1) {
<wagademy-user-data
  [profilePhoto]="profilePhoto"
  (imageUploaded)="onImageUploaded($event)"
  [userData]="userData"
  (nextStep)="step = 2"
></wagademy-user-data>
}@if(step === 2) {
<wagademy-education
  [educationForm]="educationForm"
  (nextStep)="step = 3"
  (previousStep)="step = 1"
></wagademy-education>
} @if(step === 3) {
<wagademy-expertise
  [expertises]="expertises"
  [expertiseForm]="expertiseForm"
  (nextStep)="step = 4"
  (previousStep)="step = 2"
></wagademy-expertise>
} @if(step === 4) {
<wagademy-professional-experience
  [professionalExperienceForm]="professionalExperienceForm"
  (nextStep)="step = 5"
  (previousStep)="step = 3"
></wagademy-professional-experience>
} @if(step === 5) {
<wagademy-skills
  [skills]="skills"
  [skillsForm]="skillsForm"
  (nextStep)="step = 6"
  (previousStep)="step = 4"
></wagademy-skills>
} @if(step === 6) {
<div class="pt-8 min-h-screen container mx-auto px-5 lg:px-40">
  <p class="text-4xl text-neutral-950 mb-8 text-center font-bold">
    Confirm your details
  </p>
  <div class="mb-4">
    <wagademy-photo-upload
      [profilePhoto]="profilePhoto"
      [size]="'small'"
    ></wagademy-photo-upload>
  </div>
  <p class="text-xl font-bold text-primary mb-6">Profile</p>
  @if (editMode) {
  <form [formGroup]="userData">
    <div class="flex flex-col md:flex-row md:gap-10">
      <div class="md:w-1/2">
        <wagademy-form-field [control]="userData.controls['name']">
          <wagademy-input
            placeholder="Name example"
            type="text"
            formControlName="name"
          >
          </wagademy-input>
        </wagademy-form-field>
      </div>
      <div class="md:w-1/2">
        <wagademy-form-field [control]="userData.controls['email']">
          <wagademy-input
            placeholder="email@email.com"
            type="text"
            formControlName="email"
          >
          </wagademy-input>
        </wagademy-form-field>
      </div>
    </div>
    <div class="flex flex-col md:flex-row md:gap-10">
      <div class="md:w-1/2">
        <wagademy-form-field [control]="userData.controls['birth']">
          <wagademy-input type="date" formControlName="birth"> </wagademy-input>
        </wagademy-form-field>
      </div>
      <div class="md:w-1/2">
        <wagademy-form-field [control]="userData.controls['cellphone']">
          <wagademy-input
            placeholder="+55 11 91234-5678"
            type="text"
            formControlName="cellphone"
          >
          </wagademy-input>
        </wagademy-form-field>
      </div>
    </div>
    <div class="flex flex-col md:flex-row md:gap-10">
      <div class="md:w-1/2">
        <wagademy-form-field
          [control]="userData.controls['country']"
          class="w-full"
        >
          <wagademy-select
            [items]="mockCountries"
            [formControl]="userData.controls['country']"
          ></wagademy-select>
        </wagademy-form-field>
      </div>
      <div class="md:w-1/2">
        <wagademy-form-field
          [control]="userData.controls['state']"
          class="w-full"
        >
          <wagademy-select
            [items]="mockStates"
            [formControl]="userData.controls['state']"
          ></wagademy-select>
        </wagademy-form-field>
      </div>
    </div>
    <p class="text-primary font-bold mt-4">About</p>
    <wagademy-form-field [control]="userData.controls.about">
      <wagademy-text-area formControlName="about"></wagademy-text-area>
    </wagademy-form-field>
  </form>
  } @else {
  <div class="text-base-200">
    <div class="grid grid-cols-1 sm:grid-cols-2 gap-4 mb-4">
      <div class="text-2xl text-neutral-950 flex items-center gap-2">
        {{ userData.get('name')?.value }}
      </div>
      <div class="flex items-center gap-2">
        <img src="./assets/icons/icon-cake.svg" alt="cake icon" />
        {{ userData.get('birth')?.value }}
      </div>
      <div class="flex items-center gap-2">
        <img src="./assets/icons/icon-envelope.svg" alt="envelope icon" />
        {{ userData.get('email')?.value }}
      </div>
      <div class="flex items-center gap-2">
        <img src="./assets/icons/icon-telephone.svg" alt="telephone icon" />
        {{ userData.get('cellphone')?.value }}
      </div>
      <div class="flex items-center gap-2">
        <img src="./assets/icons/icon-pin-map.svg" alt="pin icon" />
        {{ userData.get('state')?.value }}
      </div>
      <div class="flex items-center gap-2">
        <img src="./assets/icons/icon-globe.svg" alt="globe icon" />
        {{ userData.get('country')?.value }}
      </div>
    </div>
  </div>
  <p class="text-primary font-bold mb-2">About</p>
  <p class="text-base-200">{{ userData.get('about')?.value }}</p>
  }
  <div class="flex justify-end">
    @if (editMode) {
    <button
      class="mt-7 mb-6 text-neutral-950 font-bold flex gap-2 items-center"
      (click)="editMode = !editMode"
    >
      Update
      <img src="./assets/icons/icon-check.svg" alt="check icon" />
    </button>
    } @else {
    <button
      class="mt-7 mb-6 text-neutral-950 font-bold flex gap-2 items-center"
      (click)="editMode = !editMode"
    >
      Edit
      <img src="./assets/icons/icon-pencil.svg" alt="pencil icon" />
    </button>
    }
  </div>
  @if (editMode) {
  <div
    class="flex items-center justify-between border-t-2 border-neutral-300/20"
  >
    <p class="text-xl font-bold text-primary py-6">Education</p>
    <button (click)="addEducationItem()" class="btn btn-accent text-neutral-50">
      Add +
    </button>
  </div>
  <form [formGroup]="educationForm">
    <div formArrayName="items">
      <div
        *ngFor="
          let educationItem of educationItems.controls;
          let i = index;
          let last = last
        "
        [formGroupName]="i"
        [ngClass]="{
          'border-t-2 border-neutral-300/20 mt-8 pt-8': i > 0
        }"
      >
        <wagademy-form-field [control]="educationItem.get('degree')!">
          <wagademy-input
            placeholder="email@email.com"
            type="text"
            formControlName="degree"
          >
          </wagademy-input>
        </wagademy-form-field>
        <wagademy-form-field [control]="educationItem.get('institution')!">
          <wagademy-input
            placeholder="Education example"
            type="text"
            formControlName="institution"
          >
          </wagademy-input>
        </wagademy-form-field>
        <wagademy-form-field [control]="educationItem.get('course')!">
          <wagademy-input
            placeholder="Course name"
            type="text"
            formControlName="course"
          >
          </wagademy-input>
        </wagademy-form-field>
        <div class="flex flex-col lg:flex-row lg:gap-10 lg:items-center">
          <div class="form-control lg:w-96 w-40">
            <label class="label cursor-pointer">
              <input type="checkbox" class="checkbox checkbox-primary" />
              <span class="label-text text-neutral-950"
                >I'm still studying</span
              >
            </label>
          </div>
          <div class="w-full">
            <wagademy-form-field [control]="educationItem.get('startDate')!">
              <wagademy-input
                placeholder="MM / DD / YYYY"
                type="date"
                formControlName="startDate"
              >
              </wagademy-input>
            </wagademy-form-field>
          </div>
          <div class="w-full">
            <wagademy-form-field [control]="educationItem.get('endDate')!">
              <wagademy-input
                placeholder="MM / DD / YYYY"
                type="date"
                formControlName="endDate"
              >
              </wagademy-input>
            </wagademy-form-field>
          </div>
        </div>
        <wagademy-form-field [control]="educationItem.get('description')!">
          <wagademy-text-area
            placeholder="Tell your description"
            formControlName="description"
          ></wagademy-text-area>
        </wagademy-form-field>
        @if (i > 0) {
        <button
          class="text-neutral-950 font-bold flex items-center gap-1 disabled:text-neutral-300"
          (click)="removeEducationItem(i)"
        >
          Remove
          <img
            src="./assets/icons/icon-trash.svg"
            width="14px"
            height="14px"
            alt="trash icon"
            fetchpriority="auto"
          /></button
        >}
      </div>
    </div>
  </form>
  } @else {
  <p
    class="text-xl font-bold text-primary py-6 border-t-2 border-neutral-300/20"
  >
    Education
  </p>
  <div
    *ngFor="let item of educationForm.get('items')?.value; let i = index"
    class="mb-3"
  >
    <p class="text-neutral-950 font-bold">{{ item.course }}</p>
    <div class="flex flex-col sm:flex-row gap-2 text-base-200">
      <p class="font-bold">{{ item.degree }}</p>
      <p>{{ item.institution }}</p>
    </div>
    <div class="flex gap-2 items-center mb-4 text-base-200 text-sm">
      <p>{{ item.startDate }}</p>
      <span class="bg-base-200 w-1 h-1 rounded-full"></span>
      <p>{{ item.endDate }}</p>
    </div>
    <p class="text-neutral-950">{{ item.description }}</p>
  </div>
  }
  <div class="flex justify-end">
    @if (editMode) {
    <button
      class="mt-7 mb-6 text-neutral-950 font-bold flex gap-2 items-center"
      (click)="editMode = !editMode"
    >
      Update
      <img src="./assets/icons/icon-check.svg" alt="check icon" />
    </button>
    } @else {
    <button
      class="mt-7 mb-6 text-neutral-950 font-bold flex gap-2 items-center"
      (click)="editMode = !editMode"
    >
      Edit
      <img src="./assets/icons/icon-pencil.svg" alt="pencil icon" />
    </button>
    }
  </div>
  @if (editMode) {
  <div
    class="flex items-center justify-between border-t-2 border-neutral-300/20"
  >
    <p class="text-xl font-bold text-primary py-6">Professional Experience</p>
    <button
      (click)="addProfessionalExperienceItem()"
      class="btn btn-accent text-neutral-50"
    >
      Add +
    </button>
  </div>
  <form [formGroup]="professionalExperienceForm">
    <div formArrayName="items">
      <div
        *ngFor="
          let professionalExperienceItem of professionalExperienceItems.controls;
          let i = index;
          let last = last
        "
        [formGroupName]="i"
        [ngClass]="{
          'border-t-2 border-neutral-300/20 mt-8 pt-8': i > 0
        }"
      >
        <wagademy-form-field
          [control]="professionalExperienceItem.get('company')!"
        >
          <wagademy-input
            placeholder="Company example"
            type="text"
            formControlName="company"
          >
          </wagademy-input>
        </wagademy-form-field>
        <wagademy-form-field
          [control]="professionalExperienceItem.get('jobTitle')!"
        >
          <wagademy-input
            placeholder="Job title"
            type="text"
            formControlName="jobTitle"
          >
          </wagademy-input>
        </wagademy-form-field>
        <div class="flex flex-col lg:flex-row lg:gap-10 lg:items-center">
          <div class="form-control w-44 lg:w-[500px]">
            <label class="label cursor-pointer">
              <input type="checkbox" class="checkbox checkbox-primary" />
              <span class="label-text text-neutral-950"
                >I currently work here
              </span>
            </label>
          </div>
          <div class="w-full">
            <wagademy-form-field
              [control]="professionalExperienceItem.get('startDate')!"
            >
              <wagademy-input
                placeholder="MM / DD / YYYY"
                type="date"
                formControlName="startDate"
              >
              </wagademy-input>
            </wagademy-form-field>
          </div>
          <div class="w-full">
            <wagademy-form-field
              [control]="professionalExperienceItem.get('endDate')!"
            >
              <wagademy-input
                placeholder="MM / DD / YYYY"
                type="date"
                formControlName="endDate"
              >
              </wagademy-input>
            </wagademy-form-field>
          </div>
        </div>
        <wagademy-form-field
          [control]="professionalExperienceItem.get('description')!"
        >
          <wagademy-text-area
            placeholder="Tell your description"
            formControlName="description"
          ></wagademy-text-area>
        </wagademy-form-field>
        @if (i > 0) {
        <button
          class="text-neutral-950 font-bold flex items-center gap-1 disabled:text-neutral-300"
          (click)="removeProfessionalExperienceItem(i)"
        >
          Remove
          <img
            src="./assets/icons/icon-trash.svg"
            width="14px"
            height="14px"
            alt="trash icon"
            fetchpriority="auto"
          /></button
        >}
      </div>
    </div>
  </form>
  } @else {
  <p
    class="text-xl font-bold text-primary py-6 border-t-2 border-neutral-300/20"
  >
    Professional experience
  </p>
  <div
    *ngFor="
      let item of professionalExperienceForm.get('items')?.value;
      let i = index
    "
    class="mb-3"
  >
    <p class="text-neutral-950 font-bold">{{ item.jobTitle }}</p>
    <p class="flex flex-col sm:flex-row gap-2 text-base-200">
      {{ item.company }}
    </p>
    <div class="flex gap-2 items-center mb-4 text-base-200 text-sm">
      <p>{{ item.startDate }}</p>
      <span class="bg-base-200 w-1 h-1 rounded-full"></span>
      <p>{{ item.endDate }}</p>
    </div>
    <p class="text-neutral-950">{{ item.description }}</p>
  </div>
  }
  <div class="flex justify-end">
    @if (editMode) {
    <button
      class="mt-7 mb-6 text-neutral-950 font-bold flex gap-2 items-center"
      (click)="editMode = !editMode"
    >
      Update
      <img src="./assets/icons/icon-check.svg" alt="check icon" />
    </button>
    } @else {
    <button
      class="mt-7 mb-6 text-neutral-950 font-bold flex gap-2 items-center"
      (click)="editMode = !editMode"
    >
      Edit
      <img src="./assets/icons/icon-pencil.svg" alt="pencil icon" />
    </button>
    }
  </div>
  <p
    class="text-xl font-bold text-primary py-6 border-t-2 border-neutral-300/20"
  >
    Area of expertise
  </p>
  @if(editMode) {
  <form [formGroup]="expertiseForm">
    <wagademy-form-field
      [control]="expertiseForm.controls['newExpertise']"
      label="You need to fill up to 10 words to describe your areas of expertise"
    >
      <wagademy-input
        placeholder="Expertise Example"
        type="text"
        formControlName="newExpertise"
        (keydown.enter)="addExpertise()"
      >
      </wagademy-input>
    </wagademy-form-field>
  </form>
  <ul class="flex gap-4 mt-6 flex-wrap">
    <li
      class="bg-neutral text-neutral-950 p-1 rounded-md flex justify-between"
      *ngFor="let expertise of expertises; let i = index"
    >
      <p>{{ expertise }}</p>
      <button (click)="removeExpertise(i)">
        <img src="./assets/icons/icon-close.svg" />
      </button>
    </li>
  </ul>
  } @else {
  <ul class="flex flex-wrap gap-4">
    <li
      class="bg-neutral text-neutral-950 p-1 rounded-full"
      *ngFor="let expertise of expertises"
    >
      {{ expertise }}
    </li>
  </ul>
  }
  <div class="flex justify-end">
    @if (editMode) {
    <button
      class="mt-7 mb-6 text-neutral-950 font-bold flex gap-2 items-center"
      (click)="editMode = !editMode"
    >
      Update
      <img src="./assets/icons/icon-check.svg" alt="check icon" />
    </button>
    } @else {
    <button
      class="mt-7 mb-6 text-neutral-950 font-bold flex gap-2 items-center"
      (click)="editMode = !editMode"
    >
      Edit
      <img src="./assets/icons/icon-pencil.svg" alt="pencil icon" />
    </button>
    }
  </div>
  <p
    class="text-xl font-bold text-primary py-6 border-t-2 border-neutral-300/20"
  >
    Skills and competences
  </p>
  @if (editMode) {
  <form [formGroup]="skillsForm">
    <wagademy-form-field
      [control]="skillsForm.controls['newSkill']"
      label="You need to fill up to 10 words to describe your skills and competencies"
    >
      <wagademy-input
        placeholder="Skill Example"
        type="text"
        formControlName="newSkill"
        (keydown.enter)="addSkill()"
      >
      </wagademy-input>
    </wagademy-form-field>
  </form>
  <ul class="flex gap-4 mt-6 flex-wrap">
    <li
      class="bg-neutral text-neutral-950 p-1 rounded-md flex justify-between"
      *ngFor="let skill of skills; let i = index"
    >
      <p>{{ skill }}</p>
      <button (click)="removeSkill(i)">
        <img src="./assets/icons/icon-close.svg" />
      </button>
    </li>
  </ul>
  } @else {
  <ul class="flex gap-4 flex-wrap">
    <li
      class="bg-neutral text-neutral-950 p-1 rounded-full"
      *ngFor="let skill of skills"
    >
      {{ skill }}
    </li>
  </ul>
  }
  <div class="flex justify-end">
    @if (editMode) {
    <button
      class="mt-7 mb-6 text-neutral-950 font-bold flex gap-2 items-center"
      (click)="editMode = !editMode"
    >
      Update
      <img src="./assets/icons/icon-check.svg" alt="check icon" />
    </button>
    } @else {
    <button
      class="mt-7 mb-6 text-neutral-950 font-bold flex gap-2 items-center"
      (click)="editMode = !editMode"
    >
      Edit
      <img src="./assets/icons/icon-pencil.svg" alt="pencil icon" />
    </button>
    }
  </div>
  <div class="w-full flex justify-center pb-10">
    <button
      class="btn btn-primary text-base-100 text-xl w-52"
      (click)="editMode = false"
    >
      Save And Confirm
    </button>
  </div>
</div>
}
