<lens-academy-navbar></lens-academy-navbar>
<div class="container px-3 sm:mx-auto">
  <div class="mt-6 flex flex-col gap-8 sm:flex-row sm:items-center">
    <div
      class="text-secondary flex cursor-pointer items-center gap-2"
      (click)="back()"
    >
      <i class="bi-arrow-left text-xl"></i>
      <span class="font-mono font-bold">Back</span>
    </div>
    <lens-academy-input
      type="search"
      class="flex-1"
      placeholder="Search"
    ></lens-academy-input>
    <lens-academy-button-secondary
      class="sm:w-52"
      (click)="showCreateSquadModal = true"
      >CREATE SQUAD</lens-academy-button-secondary
    >
  </div>
  <div class="mb-4 mt-8 flex items-baseline gap-2">
    <h3 class="text-secondary text-2xl font-bold">Squads</h3>
    <ng-container *ngIf="mode === 'MANAGE'">
      <i class="bi-chevron-right text-neutral-2 mt-1"></i>
      <span class="text-neutral-1 text-sm font-bold">YOUR SQUADS</span>
    </ng-container>
  </div>
  <div
    class="mb-8 grid flex-1 grid-cols-1 place-items-center sm:grid-cols-2 lg:grid-cols-3 2xl:grid-cols-4"
  >
    <ng-container *ngIf="mode === 'JOIN'">
      <ng-container *ngFor="let squad of squadsToJoin">
        <lens-academy-card
          [squad]="squad"
          [mode]="mode"
          (join)="joinSquad($event)"
          (showParticipants)="showParticipantsModal = true"
        ></lens-academy-card>
      </ng-container>
    </ng-container>
    <ng-container *ngIf="mode === 'MANAGE'">
      <ng-container *ngFor="let squad of squadsBelonged">
        <lens-academy-card
          [squad]="squad"
          [mode]="mode"
          (quit)="squadIndexToQuit = $event"
          (showParticipants)="showParticipantsModal = true"
        ></lens-academy-card>
      </ng-container>
      <div class="relative flex h-64 w-64 items-center justify-center">
        <div
          class="bg-secondary flex h-10 w-10 cursor-pointer items-center justify-center rounded-full"
          (click)="mode = 'JOIN'"
        >
          <i class="bi bi-plus text-neutral-4 text-4xl"></i>
        </div>
        <span
          *ngIf="squadsBelonged.length === 0"
          class="text-neutral-1 absolute top-10 text-2xl font-bold"
          >Add Squad
        </span>
      </div>
    </ng-container>
  </div>
</div>
<lens-academy-base-modal
  title="CREATE SQUAD"
  *ngIf="showCreateSquadModal"
  (modalClosed)="showCreateSquadModal = false"
>
  <form class="flex flex-col items-center gap-4 p-6" [formGroup]="form">
    <img
      src="https://i.pravatar.cc/300"
      alt="avatar example"
      class="h-24 w-24 rounded-full object-cover"
    />
    <lens-academy-form-field
      label="Squad Name"
      [control]="getControl('name')"
      class="w-full"
    >
      <lens-academy-input
        type="text"
        placeholder="Squad Name"
        formControlName="name"
      ></lens-academy-input>
    </lens-academy-form-field>
    <lens-academy-button-primary
      class="mt-14 w-full sm:w-52"
      (click)="createSquad()"
      >CREATE</lens-academy-button-primary
    >
  </form>
</lens-academy-base-modal>
<lens-academy-success-modal
  *ngIf="congratulationsMessage"
  [message]="congratulationsMessage"
></lens-academy-success-modal>
<div *ngFor="let squad of squadsBelonged">
  <lens-academy-warning-modal
    *ngIf="squadIndexToQuit"
    (yes)="quitSquad(squadIndexToQuit)"
    (cancel)="squadIndexToQuit = false"
    title="Do you really want to leave this squad?"
    text="Amet minim mollit non deserunt ullamco est sit aliqua dolor do amet
        sint. Velit officia consequat duis enim velit mollit."
  ></lens-academy-warning-modal>
</div>
<lens-academy-participants
  *ngIf="showParticipantsModal"
  (modalClosed)="showParticipantsModal = false"
></lens-academy-participants>
